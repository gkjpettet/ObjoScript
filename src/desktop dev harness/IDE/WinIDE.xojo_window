#tag DesktopWindow
Begin DesktopWindow WinIDE
   Backdrop        =   0
   BackgroundColor =   &cFFFFFF
   Composite       =   False
   DefaultLocation =   2
   FullScreen      =   False
   HasBackgroundColor=   False
   HasCloseButton  =   True
   HasFullScreenButton=   False
   HasMaximizeButton=   True
   HasMinimizeButton=   True
   Height          =   836
   ImplicitInstance=   False
   MacProcID       =   0
   MaximumHeight   =   32000
   MaximumWidth    =   32000
   MenuBar         =   910139391
   MenuBarVisible  =   False
   MinimumHeight   =   64
   MinimumWidth    =   64
   Resizeable      =   True
   Title           =   "ObjoScript IDE"
   Type            =   0
   Visible         =   True
   Width           =   1470
   Begin XUICodeEditor Editor
      AllowAutocomplete=   True
      AllowAutoCompleteInComments=   True
      AllowFocusRing  =   False
      AllowInertialScrolling=   True
      AutocloseBrackets=   False
      AutocompleteCombo=   1
      AutocompletePopupFontName=   "System"
      AutocompletePopupFontSize=   12
      AutoDeactivate  =   True
      BackgroundColor =   &c00000000
      BlinkCaret      =   True
      BorderColor     =   &c00000000
      CaretColour     =   &c00000000
      CaretColumn     =   0
      CaretLineNumber =   0
      CaretPosition   =   0
      CaretType       =   2
      CaretXCoordinate=   0
      Contents        =   ""
      ContentType     =   "XUICodeEditor.ContentTypes.SourceCode"
      CurrentLineHighlightColor=   &c00000000
      CurrentLineNumberColor=   &c00000000
      CurrentUndoID   =   0
      DebuggingLine   =   0
      DebugLineColour =   &c00000000
      DisplayLineNumbers=   False
      DrawBlockLines  =   True
      Enabled         =   True
      FirstVisibleLine=   0
      FontName        =   "System"
      FontSize        =   12
      HasBottomBorder =   True
      HasFocus        =   False
      HasLeftBorder   =   False
      HasRightBorder  =   True
      HasTopBorder    =   False
      Height          =   564
      HighlightCurrentLine=   True
      HighlightDelimitersAroundCaret=   False
      Index           =   -2147483648
      InitialParent   =   ""
      JustTokenised   =   False
      LastFullyVisibleLineNumber=   0
      LastParseMicroseconds=   0.0
      Left            =   0
      LineNumberColor =   &c00000000
      LineNumberFontSize=   12
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      LongestLineChanged=   False
      MinimumAutocompletionLength=   2
      MinimumParseInterval=   500
      NeedsFullRedraw =   False
      ReadOnly        =   False
      Scope           =   0
      ScrollPosX      =   0
      SelectionColour =   &c00000000
      SpacesPerTab    =   4
      TabIndex        =   0
      TabPanelIndex   =   0
      TabStop         =   True
      TextSelected    =   False
      Tooltip         =   ""
      Top             =   0
      VerticalLinePadding=   0
      Visible         =   True
      Width           =   695
   End
   Begin DesktopBevelButton ButtonAST
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      AllowTabStop    =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "AST"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1390
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   1
      TabPanelIndex   =   0
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   True
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopBevelButton ButtonErrors
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      AllowTabStop    =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Errors"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1246
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   3
      TabPanelIndex   =   0
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopBevelButton ButtonTokens
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      AllowTabStop    =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Tokens"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1318
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   5
      TabPanelIndex   =   0
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopPagePanel Panel
      AllowAutoDeactivate=   True
      Enabled         =   True
      Height          =   477
      Index           =   -2147483648
      Left            =   707
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PanelCount      =   5
      Panels          =   ""
      Scope           =   2
      SelectedPanelIndex=   0
      TabIndex        =   6
      TabPanelIndex   =   0
      TabStop         =   False
      Tooltip         =   ""
      Top             =   87
      Transparent     =   False
      Value           =   4
      Visible         =   True
      Width           =   743
      Begin DesktopListBox TokensListbox
         AllowAutoDeactivate=   True
         AllowAutoHideScrollbars=   True
         AllowExpandableRows=   False
         AllowFocusRing  =   False
         AllowResizableColumns=   False
         AllowRowDragging=   False
         AllowRowReordering=   False
         Bold            =   False
         ColumnCount     =   5
         ColumnWidths    =   "200, 60, 60, *, 60"
         DefaultRowHeight=   20
         DropIndicatorVisible=   False
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         GridLineStyle   =   0
         HasBorder       =   True
         HasHeader       =   True
         HasHorizontalScrollbar=   False
         HasVerticalScrollbar=   True
         HeadingIndex    =   -1
         Height          =   477
         Index           =   -2147483648
         InitialParent   =   "Panel"
         InitialValue    =   "Type	Line	Abs Pos	Value	Script ID"
         Italic          =   False
         Left            =   707
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         RequiresSelection=   False
         RowSelectionType=   0
         Scope           =   0
         TabIndex        =   0
         TabPanelIndex   =   1
         TabStop         =   True
         Tooltip         =   ""
         Top             =   87
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   743
         _ScrollOffset   =   0
         _ScrollWidth    =   -1
      End
      Begin DesktopListBox ErrorsListbox
         AllowAutoDeactivate=   True
         AllowAutoHideScrollbars=   True
         AllowExpandableRows=   False
         AllowFocusRing  =   False
         AllowResizableColumns=   False
         AllowRowDragging=   False
         AllowRowReordering=   False
         Bold            =   False
         ColumnCount     =   4
         ColumnWidths    =   "*, 60, 60, 60"
         DefaultRowHeight=   -1
         DropIndicatorVisible=   False
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         GridLineStyle   =   0
         HasBorder       =   True
         HasHeader       =   True
         HasHorizontalScrollbar=   False
         HasVerticalScrollbar=   True
         HeadingIndex    =   -1
         Height          =   477
         Index           =   -2147483648
         InitialParent   =   "Panel"
         InitialValue    =   "Message	Line	AbsPos	Script ID"
         Italic          =   False
         Left            =   707
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         RequiresSelection=   False
         RowSelectionType=   0
         Scope           =   2
         TabIndex        =   0
         TabPanelIndex   =   3
         TabStop         =   True
         Tooltip         =   ""
         Top             =   87
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   743
         _ScrollOffset   =   0
         _ScrollWidth    =   -1
      End
      Begin ASTTreeView ASTView
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   477
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   707
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   2
         TabStop         =   True
         Tooltip         =   ""
         Top             =   87
         UseFocusRing    =   False
         Visible         =   True
         Width           =   743
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
      Begin DisassemblerTreeView DisassemblyOutput
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   477
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   707
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   4
         TabStop         =   True
         Tooltip         =   ""
         Top             =   87
         UseFocusRing    =   True
         Visible         =   True
         Width           =   743
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
      Begin DebuggerTreeView DebuggerTree
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   477
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   707
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   5
         TabStop         =   True
         Tooltip         =   ""
         Top             =   87
         UseFocusRing    =   True
         Visible         =   True
         Width           =   743
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
   End
   Begin DesktopTextArea Output
      AllowAutoDeactivate=   True
      AllowFocusRing  =   False
      AllowSpellChecking=   True
      AllowStyledText =   True
      AllowTabs       =   False
      BackgroundColor =   &cFFFFFF
      Bold            =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Format          =   ""
      HasBorder       =   True
      HasHorizontalScrollbar=   False
      HasVerticalScrollbar=   True
      Height          =   249
      HideSelection   =   True
      Index           =   -2147483648
      Italic          =   False
      Left            =   20
      LineHeight      =   0.0
      LineSpacing     =   1.0
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   False
      MaximumCharactersAllowed=   0
      Multiline       =   True
      ReadOnly        =   True
      Scope           =   2
      TabIndex        =   7
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ""
      TextAlignment   =   0
      TextColor       =   &c000000
      Tooltip         =   ""
      Top             =   576
      Transparent     =   False
      Underline       =   False
      UnicodeMode     =   1
      ValidationMask  =   ""
      Visible         =   True
      Width           =   675
   End
   Begin DesktopButton ButtonRun
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Run"
      Default         =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   707
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MacButtonStyle  =   0
      Scope           =   2
      TabIndex        =   9
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   70
   End
   Begin DesktopBevelButton ButtonDisassembler
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      AllowTabStop    =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Disassembler"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1132
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   10
      TabPanelIndex   =   0
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   102
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopButton ButtonDebug
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Debug"
      Default         =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   789
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MacButtonStyle  =   0
      Scope           =   2
      TabIndex        =   11
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   70
   End
   Begin DesktopButton ButtonStep
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Step"
      Default         =   False
      Enabled         =   False
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   871
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MacButtonStyle  =   0
      Scope           =   2
      TabIndex        =   12
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   70
   End
   Begin DesktopBevelButton ButtonDebugger
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      AllowTabStop    =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Debugger"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1047
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   13
      TabPanelIndex   =   0
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   73
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopButton ButtonStop
      AllowAutoDeactivate=   True
      Bold            =   False
      Cancel          =   False
      Caption         =   "Stop"
      Default         =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   953
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MacButtonStyle  =   0
      Scope           =   2
      TabIndex        =   14
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Visible         =   True
      Width           =   70
   End
   Begin DesktopCheckBox CheckBoxShowCoreBytecode
      AllowAutoDeactivate=   True
      Bold            =   False
      Caption         =   "Show Core Bytecode"
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   1047
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Scope           =   2
      TabIndex        =   15
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   54
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      VisualState     =   1
      Width           =   164
   End
   Begin DesktopCheckBox CheckBoxShowCoreASTNodes
      AllowAutoDeactivate=   True
      Bold            =   False
      Caption         =   "Show Core AST Nodes"
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   1214
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Scope           =   2
      TabIndex        =   16
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   54
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      VisualState     =   1
      Width           =   164
   End
End
#tag EndDesktopWindow

#tag WindowCode
	#tag Event
		Function CancelClosing(appQuitting As Boolean) As Boolean
		  #Pragma Unused appQuitting
		  
		  If Self.Changed Then
		    // Prompt the user to save changes.
		    Select Case SaveChangesDialog
		    Case SavePromptChoices.DontSave
		      // Allow the window to close.
		      Return False
		      
		    Case SavePromptChoices.Cancel
		      // Prevent the window closing.
		      Return True
		      
		    Case SavePromptChoices.Save
		      Return Not SaveFile(File)
		    End Select
		    
		  Else
		    // Allow the window to close.
		    Return False
		  End If
		  
		End Function
	#tag EndEvent

	#tag Event
		Sub MenuBarSelected()
		  // Edit menu
		  EditCopy.Enabled = Editor.TextSelected
		  EditCut.Enabled = Editor.TextSelected
		  EditRedo.Enabled = UndoManager.CanRedo
		  EditSelectAll.Enabled = Editor.Contents.Length > 0
		  EditUndo.Enabled = UndoManager.CanUndo
		  
		End Sub
	#tag EndEvent

	#tag Event
		Sub Opening()
		  // Create an undo manager.
		  UndoManager = New XUIUndoManager
		  
		  // We have to assign the code editor's undo manager here because the window's Opening event fires 
		  // after the editor's Opening event.
		  Editor.UndoManager = Self.UndoManager
		  
		  // Obviously the editor needs to format Objo code.
		  Editor.Formatter = New XUICEObjoScriptFormatter
		  
		  // Set the theme.
		  Editor.Theme = XUICETheme.FromFile(SpecialFolder.Resource("EditorTheme.toml"))
		  
		  // Increase the default font a little.
		  Editor.FontSize = 14
		  
		  // Position the window a little down from the top of the desktop.
		  Self.Top = 70
		  
		  // Enable autocompletion.
		  Editor.AllowAutocomplete = True
		  
		  // Initialise a basic autocompletion engine.
		  InitialiseAutocomplete
		  
		  If File <> Nil And File.Exists Then
		    Var tin As TextInputStream = TextInputStream.Open(File)
		    Var s As String = tin.ReadAll
		    tin.Close
		    s = s.ReplaceLineEndings(EndOfLine.UNIX)
		    Editor.Insert(s, 0, False, True, False)
		  End If
		  
		  Self.Changed = False
		End Sub
	#tag EndEvent


	#tag MenuHandler
		Function EditCopy() As Boolean Handles EditCopy.Action
		  // Copies the contents of the current selection in the editor to the clipboard.
		  
		  Var c As New Clipboard
		  If Editor.TextSelected Then
		    c.Text = Editor.CurrentSelection.ToString
		  Else
		    c.Text = ""
		  End If
		  c.Close
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditCut() As Boolean Handles EditCut.Action
		  // Cuts the contents of the current selection in the editor and puts it on the clipboard.
		  
		  Var c As New Clipboard
		  If Editor.TextSelected Then
		    c.Text = Editor.CurrentSelection.ToString
		  Else
		    c.Text = ""
		  End If
		  c.Close
		  
		  Editor.DeleteSelection(True, True, True, "Cut Text")
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditPaste() As Boolean Handles EditPaste.Action
		  // Pastes the contents of the clipboard into the editor.
		  
		  // Get the clipboard text (replacing any line endings with UNIX ones).
		  Var c As New Clipboard
		  Var t As String = c.Text.ReplaceLineEndings(&u0A)
		  c.Close
		  
		  // Insert the text.
		  If t.CharacterCount > 0 Then
		    If Editor.TextSelected Then
		      Editor.ReplaceCurrentSelection(t)
		    Else
		      Editor.Insert(t, Editor.CaretPosition, True)
		    End If
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditRedo() As Boolean Handles EditRedo.Action
		  If UndoManager.CanRedo Then
		    UndoManager.Redo
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditSelectAll() As Boolean Handles EditSelectAll.Action
		  // Select everything in the editor.
		  
		  Self.Editor.SelectAll
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditUndo() As Boolean Handles EditUndo.Action
		  If UndoManager.CanUndo Then
		    UndoManager.Undo
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileCloseWindow() As Boolean Handles FileCloseWindow.Action
		  Self.Close
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileNew() As Boolean Handles FileNew.Action
		  // Create a new IDE window instance.
		  
		  Var w As New WinIDE(Nil)
		  w.Show
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileOpen() As Boolean Handles FileOpen.Action
		  /// Open an ObjoScript file.
		  
		  Var f As FolderItem = FolderItem.ShowOpenFileDialog(DocumentTypes.ObjoScript)
		  
		  If f = Nil Then Return True
		  
		  Var w As New WinIDE(f)
		  w.Show
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileRun() As Boolean Handles FileRun.Action
		  Run
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileSave() As Boolean Handles FileSave.Action
		  If SaveFile(Self.File) Then
		    Self.Changed = False
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileSaveAs() As Boolean Handles FileSaveAs.Action
		  If SaveFile(Nil) Then
		    Self.Changed = False
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler


	#tag Method, Flags = &h21, Description = 436F6D70696C65732074686520736F7572636520636F646520696E2074686520656469746F722C20696E746F20612066756E6374696F6E2077686963682069732072657475726E65642E2052657475726E73204E696C20696620636F6D70696C6174696F6E206661696C732E2052657365747320746865204944452E
		Private Function Compile(debugMode As Boolean, showCoreLibraryBytecode As Boolean) As ObjoScript.Func
		  /// Compiles the source code in the editor, into a function which is returned.
		  /// Returns Nil if compilation fails. Resets the IDE.
		  
		  #Pragma BreakOnExceptions False
		  
		  Reset
		  
		  // Show the AST by default.
		  SwitchToPanel(PANEL_AST)
		  
		  Var func As ObjoScript.Func
		  Try
		    func = Compiler.Compile(Editor.Contents, debugMode)
		    
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    // Show the AST.
		    ASTView.Display(Compiler.AST, CheckBoxShowCoreASTNodes.Value)
		    
		    // Disassemble the function.
		    DisassemblyOutput.Display(func, showCoreLibraryBytecode)
		    
		    // Successful compilation.
		    Return func
		    
		  Catch le As ObjoScript.LexerException
		    // Show the lexer error.
		    DisplayLexerError(le)
		    
		    Return Nil
		    
		  Catch pe As ObjoScript.ParserException
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    DisplayParserErrors(Compiler.ParserErrors)
		    
		    Return Nil
		    
		  Catch ce As ObjoScript.CompilerException
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    // Show the AST.
		    ASTView.Display(Compiler.AST, False)
		    
		    DisplayCompilerError(ce)
		    
		    Return Nil
		  End Try
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Constructor(file As FolderItem)
		  Self.File = file
		  
		  // Calling the overridden superclass constructor.
		  Super.Constructor
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 52657475726E7320612073656E7369626C652064656661756C74206D6F6E6F737061636520666F6E74206E616D6520666F722074686520706C6174666F726D207765277265206F6E2E
		Private Function DefaultMonospaceFont() As String
		  /// Returns a sensible default monospace font name for the platform we're on.
		  
		  #If TargetMacOS Then
		    Return "Menlo"
		    
		  #ElseIf TargetWindows Then
		    Return "Consolas"
		    
		  #ElseIf TargetLinux Then
		    Return "DejaVu Sans Mono"
		  #EndIf
		End Function
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 52656D6F76657320616E792068616E646C65727320776527766520616464656420746F2074686520564D2E2049662074686520564D206973204E696C207468656E206E6F7468696E672068617070656E732E
		Private Sub DismantleVM()
		  /// Removes any handlers we've added to the VM.
		  /// If the VM is Nil then nothing happens.
		  
		  If VM <> Nil Then
		    RemoveHandler VM.Print, AddressOf VMPrintDelegate
		    RemoveHandler VM.Finished, AddressOf VMFinishedDelegate
		    RemoveHandler VM.WillStop, AddressOf VMWillStopDelegate
		  End If
		  
		  VM = Nil
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F7574206120636F6D70696C6572206572726F7220696E20746865204F75747075742054657874417265612E
		Private Sub DisplayCompilerError(e As ObjoScript.CompilerException)
		  /// Displays details about a compiler error in the Output TextArea.
		  
		  Var s() As String
		  s.Add("======================")
		  s.Add("COMPILER ERROR")
		  s.Add("======================")
		  s.Add("line " + e.Location.LineNumber.ToString + ": " + e.Message)
		  
		  Output.Text = String.FromArray(s, EndOfLine)
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F75742061206C6578657220657863657074696F6E20696E20746865204F75747075742054657874417265612E
		Private Sub DisplayLexerError(e As ObjoScript.LexerException)
		  /// Displays details about a lexer exception in the Output TextArea.
		  
		  Output.Text = e.LineNumber.ToString + ", " + e.LineCharacterPosition.ToString + ": " + e.Message
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C61797320616E79206572726F72732074686174206F6363757272656420647572696E672070617273696E6720696E20746865204F75747075742054657874417265612E
		Private Sub DisplayParserErrors(errors() As ObjoScript.ParserException)
		  /// Displays any errors that occurred during parsing in the Output TextArea.
		  
		  If errors.Count = 1 Then
		    Output.Text = "A parsing error occurred."
		  Else
		    Output.Text = errors.Count.ToString + " parsing errors occurred."
		  End If
		  
		  UpdateParsingErrorsListbox(errors)
		  
		  SwitchToPanel(PANEL_ERRORS)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F7574206120564D2072756E74696D65206572726F7220696E20746865204F75747075742054657874417265612E
		Private Sub DisplayVMError(e As ObjoScript.VMException)
		  /// Displays details about a VM runtime error in the Output TextArea.
		  
		  Var s() As String
		  s.Add("======================")
		  s.Add("RUNTIME ERROR")
		  s.Add("======================")
		  s.Add("[line " + e.LineNumber.ToString + "]: " + e.Message) + EndOfLine
		  s.Add("STACK DUMP") + EndOfLine
		  s.Add(e.StackDump) + EndOfLine
		  s.Add("STACK TRACE") + EndOfLine + EndOfLine
		  Output.Text = Output.Text + If(Output.Text.Length > 0, Chr(13), "") + String.FromArray(s, EndOfLine) + String.FromArray(e.VMStackTrace, EndOfLine)
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 496E697469616C6973657320746865206175746F636F6D706C65746520656E67696E652E
		Private Sub InitialiseAutocomplete()
		  /// Initialises the autocomplete engine.
		  
		  AutocompleteEngine = New BasicAutocompleteEngine(True)
		  
		  // Keywords.
		  AutocompleteEngine.AddOption("and")
		  AutocompleteEngine.AddOption("as")
		  AutocompleteEngine.AddOption("assert")
		  AutocompleteEngine.AddOption("breakpoint")
		  AutocompleteEngine.AddOption("case")
		  AutocompleteEngine.AddOption("class")
		  AutocompleteEngine.AddOption("continue")
		  AutocompleteEngine.AddOption("constructor")
		  AutocompleteEngine.AddOption("else")
		  AutocompleteEngine.AddOption("exit")
		  AutocompleteEngine.AddOption("export")
		  AutocompleteEngine.AddOption("false")
		  AutocompleteEngine.AddOption("foreach")
		  AutocompleteEngine.AddOption("foreign")
		  AutocompleteEngine.AddOption("function")
		  AutocompleteEngine.AddOption("if")
		  AutocompleteEngine.AddOption("import")
		  AutocompleteEngine.AddOption("in")
		  AutocompleteEngine.AddOption("is")
		  AutocompleteEngine.AddOption("not")
		  AutocompleteEngine.AddOption("nothing")
		  AutocompleteEngine.AddOption("or")
		  AutocompleteEngine.AddOption("return")
		  AutocompleteEngine.AddOption("static")
		  AutocompleteEngine.AddOption("super")
		  AutocompleteEngine.AddOption("switch")
		  AutocompleteEngine.AddOption("then")
		  AutocompleteEngine.AddOption("this")
		  AutocompleteEngine.AddOption("true")
		  AutocompleteEngine.AddOption("var")
		  AutocompleteEngine.AddOption("while")
		  AutocompleteEngine.AddOption("xor")
		  
		  // Core classes.
		  AutocompleteEngine.AddOption("Boolean")
		  AutocompleteEngine.AddOption("Function")
		  AutocompleteEngine.AddOption("List")
		  AutocompleteEngine.AddOption("Number")
		  AutocompleteEngine.AddOption("Object")
		  AutocompleteEngine.AddOption("String")
		  AutocompleteEngine.AddOption("System")
		  
		  // Common methods.
		  AutocompleteEngine.AddOption("System.print")
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 526573657473207468652049444520776974682061206E657720564D2E
		Sub Reset()
		  /// Resets the IDE with a new compiler and VM.
		  
		  // Clear out the various controls on the window.
		  ASTView.RemoveAllNodes
		  DisassemblyOutput.RemoveAllNodes
		  ErrorsListbox.RemoveAllRows
		  TokensListbox.RemoveAllRows
		  Output.Text = ""
		  
		  // Get the core library source code bundled into the resources folder.
		  Var core As FolderItem = SpecialFolder.Resource("core.objo")
		  Var tin As TextInputStream = TextInputStream.Open(core)
		  Var coreLibrarySource As String = tin.ReadAll
		  
		  // Create a new compiler.
		  Compiler = New ObjoScript.Compiler(coreLibrarySource)
		  
		  // Highlight the first line in the code editor.
		  Editor.CaretLineNumber = 1
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 436F6D70696C657320616E642072756E732074686520636F646520696E2074686520736F7572636520656469746F722E
		Sub Run()
		  /// Compiles and runs the code in the source editor.
		  
		  Var f As ObjoScript.Func = Compile(False, CheckBoxShowCoreBytecode.Value)
		  
		  If f = Nil Then
		    // Compilation failed.
		    Return
		  End If
		  
		  // Setup the UI.
		  ButtonDebug.Enabled = False
		  ButtonRun.Enabled = False
		  ButtonStep.Enabled = False
		  
		  // Setup the VM in production mode.
		  SetupVM(False)
		  
		  // Run the function.
		  Try
		    VM.Interpret(f)
		  Catch e As ObjoScript.VMException
		    DisplayVMError(e)
		  End Try
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 54686572652061726520756E7361766564206368616E6765732E2050726573656E7420746865207573657220776974682061206469616C6F672061736B696E67207468656D207768617420746F20646F2E
		Function SaveChangesDialog() As SavePromptChoices
		  /// There are unsaved changes. Present the user with a dialog asking them what to do.
		  
		  Var d As New MessageDialog
		  Var b As MessageDialogButton
		  d.IconType = MessageDialog.IconTypes.Caution
		  d.ActionButton.Caption = "Save"
		  d.CancelButton.Visible = True
		  d.AlternateActionButton.Visible = True // Don't save button.
		  d.AlternateActionButton.Caption = "Don't Save"
		  d.Message = "Do you want to save changes to this document before closing?"
		  d.Explanation = "If you don't save, your changes will be lost. "
		  
		  b = d.ShowModal
		  Select Case b
		  Case d.ActionButton
		    Return SavePromptChoices.Save
		    
		  Case d.AlternateActionButton
		    Return SavePromptChoices.DontSave
		    
		  Case d.CancelButton
		    Return SavePromptChoices.Cancel
		  End Select
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 53617665732074686520636F6E74656E7473206F662074686520656469746F7220746F206066602E2049662060666020697320604E696C60207468656E2077652070726F6D707420746865207573657220666F7220612073617665206C6F636174696F6E2E2052657475726E7320547275652069662074686520636F6E74656E74732077657265207361766564206F722046616C7365206966206E6F742E
		Function SaveFile(f As FolderItem) As Boolean
		  /// Saves the contents of the editor to `f`. If `f` is `Nil` then we prompt the user
		  /// for a save location.
		  /// Returns True if the contents were saved or False if not.
		  
		  Self.Changed = True
		  
		  If f = Nil Or Not f.Exists Then
		    f = FolderItem.ShowSaveFileDialog(DocumentTypes.ObjoScript, "New ObjoScript file.objo")
		  End If
		  
		  If f = Nil Then Return False
		  
		  Var tout As TextOutputStream = TextOutputStream.Create(f)
		  tout.Write(Editor.Contents)
		  tout.Close
		  
		  Self.File = f
		  
		  Self.Changed = False
		  
		  Return True
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 536574732075702061206E657720564D20746F207573652E
		Private Sub SetupVM(debugMode As Boolean)
		  /// Initialises the VM. Dismantles a pre-existing VM.
		  
		  DismantleVM
		  VM = New ObjoScript.VM
		  VM.DebugMode = debugMode
		  AddHandler VM.Print, AddressOf VMPrintDelegate
		  AddHandler VM.Finished, AddressOf VMFinishedDelegate
		  AddHandler VM.WillStop, AddressOf VMWIllStopDelegate
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 53686F777320746865207370656369666965642070616E656C20696E20746865204944452E
		Private Sub SwitchToPanel(id As Integer)
		  /// Shows the specified panel in the IDE.
		  
		  Select Case id
		  Case PANEL_AST
		    ButtonAST.Value = True
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDebugger.Value = False
		    ButtonDisassembler.Value = False
		    Panel.SelectedPanelIndex = id
		    
		  Case PANEL_TOKENS
		    ButtonAST.Value = False
		    ButtonTokens.Value = True
		    ButtonErrors.Value = False
		    ButtonDebugger.Value = False
		    ButtonDisassembler.Value = False
		    Panel.SelectedPanelIndex = id
		    
		  Case PANEL_ERRORS
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = True
		    ButtonDebugger.Value = False
		    ButtonDisassembler.Value = False
		    Panel.SelectedPanelIndex = PANEL_ERRORS
		    
		  Case PANEL_DISASSEMBLER_OUTPUT
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDebugger.Value = False
		    ButtonDisassembler.Value = True
		    Panel.SelectedPanelIndex = PANEL_DISASSEMBLER_OUTPUT
		    
		  Case PANEL_DEBUGGER
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDisassembler.Value = False
		    ButtonDebugger.Value = True
		    Panel.SelectedPanelIndex = PANEL_DEBUGGER
		    
		  Else
		    Raise New UnsupportedOperationException("Unknown panel ID.")
		  End Select
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 55706461746573207468652070617273696E67206572726F7273206C697374626F7820776974682074686520636F6E74656E7473206F6620606572726F7273602E
		Private Sub UpdateParsingErrorsListbox(errors() As ObjoScript.ParserException)
		  /// Updates the parsing errors listbox with the contents of `errors`.
		  
		  ErrorsListbox.RemoveAllRows
		  
		  If errors.Count = 0 Then Return
		  
		  For Each e As ObjoScript.ParserException In errors
		    ErrorsListbox.AddRow(e.Message, e.Location.LineNumber.ToString, e.Location.StartPosition.ToString, e.Location.ScriptID.ToString)
		  Next e
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 557064617465732074686520746F6B656E73206C697374626F7820776974682074686520706173736564206172726179206F662060746F6B656E73602E
		Private Sub UpdateTokensListbox(tokens() As ObjoScript.Token, showStandardLibrary As Boolean)
		  /// Updates the tokens listbox with the passed array of `tokens`.
		  ///
		  /// If `showStandardLibrary` is False then we don't list those tokens that were
		  /// created by the compiler from the standard library. Their scriptID is `-1`.
		  /// type, line, abs pos, value, script ID.
		  
		  TokensListbox.RemoveAllRows
		  
		  Var type, value As String
		  For Each t As ObjoScript.Token In tokens
		    
		    If t.ScriptID = -1 And Not showStandardLibrary Then Continue
		    
		    // Compute the value and type.
		    Select Case t.Type
		    Case ObjoScript.TokenTypes.Number
		      If t.IsInteger Then
		        value = t.NumberValue.ToString(Locale.Current, "#")
		        type = "Number (int)"
		      Else
		        value = t.NumberValue.ToString
		        type = "Number (double)"
		      End If
		      
		    Case ObjoScript.TokenTypes.Boolean_
		      value = t.BooleanValue.ToString
		      type = t.Type.ToString
		      
		    Else
		      value = t.Lexeme
		      type = t.Type.ToString
		    End Select
		    
		    TokensListbox.AddRow(type, t.LineNumber.ToString, t.StartPosition.ToString, value, t.ScriptID.ToString)
		    
		  Next t
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 54686520564D20686173206A7573742066696E697368656420657865637574696F6E2E
		Private Sub VMFinishedDelegate(sender As ObjoScript.VM)
		  /// The VM has just finished execution.
		  
		  #Pragma Unused sender
		  
		  Output.Text = Output.Text + EndOfLine + "VM finished."
		  
		  // Setup the UI.
		  ButtonDebug.Enabled = True
		  ButtonRun.Enabled = True
		  ButtonStep.Enabled = False
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 54686520736372697074206861732063616C6C6564206053797374656D2E7072696E74287329602E
		Private Sub VMPrintDelegate(sender As ObjoScript.VM, s As String)
		  /// The script has called `System.print(s)`.
		  
		  #Pragma Unused sender
		  
		  Output.Text = Output.Text + s + EndOfLine
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 54686520564D2069732061626F757420746F2073746F7020626563617573652069742720686974206120627265616B20706F696E742E
		Private Sub VMWIllStopDelegate(sender As ObjoScript.VM, scriptID As Integer, lineNumber As Integer)
		  /// The VM is about to stop because it' hit a break point.
		  
		  #Pragma Unused sender
		  #Pragma Unused scriptID
		  
		  // Highlight the currently stopped on line.
		  Editor.DebuggingLine = lineNumber
		End Sub
	#tag EndMethod


	#tag Property, Flags = &h0, Description = 412076657279206261736963204F626A6F536372697074206175746F636F6D706C65746520656E67696E652E
		AutocompleteEngine As BasicAutocompleteEngine
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520636F6D70696C6572207573656420746F20636F6D70696C6520736F7572636520636F64652E
		Compiler As ObjoScript.Compiler
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 5468652066696C65206265696E67206564697465642E2057696C6C206265204E696C20696620697427732061206E65772066696C65207468617420686173206E65766572206265656E2073617665642E
		File As FolderItem
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520756E646F206D616E6167657220666F7220746869732077696E646F772E
		UndoManager As XUIUndoManager
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520564D207573656420746F206578656375746520636F64652E
		VM As ObjoScript.VM
	#tag EndProperty


	#tag Constant, Name = PANEL_AST, Type = Double, Dynamic = False, Default = \"1", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_DEBUGGER, Type = Double, Dynamic = False, Default = \"4", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_DISASSEMBLER_OUTPUT, Type = Double, Dynamic = False, Default = \"3", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_ERRORS, Type = Double, Dynamic = False, Default = \"2", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_TOKENS, Type = Double, Dynamic = False, Default = \"0", Scope = Private
	#tag EndConstant


	#tag Enum, Name = SavePromptChoices, Type = Integer, Flags = &h0
		Cancel
		  DontSave
		Save
	#tag EndEnum


#tag EndWindowCode

#tag Events Editor
	#tag Event , Description = 54686520656469746F722069732061626F757420746F20626520646973706C617965642E
		Sub Opening()
		  Me.ContentType = XUICodeEditor.ContentTypes.SourceCode
		  Me.BorderColor = New ColorGroup(&cD7D9D9, &c2A2A2A)
		End Sub
	#tag EndEvent
	#tag Event , Description = 54686520636F646520656469746F722069732061736B696E6720666F72206175746F636F6D706C6574696F6E206F7074696F6E7320666F72207468652073706563696669656420607072656669786020617420606361726574436F6C756D6E60206F6E206C696E65206E756D626572206063617265744C696E65602E20596F752073686F756C642072657475726E204E696C20696620746865726520617265206E6F6E652E
		Function AutocompleteDataForPrefix(prefix As String, caretLine As Integer, caretColumn As Integer) As XUICEAutocompleteData
		  #Pragma Unused caretLine
		  #Pragma Unused caretColumn
		  
		  Return AutocompleteEngine.DataForPrefix(prefix)
		  
		End Function
	#tag EndEvent
	#tag Event , Description = 546865207465787420636F6E74656E7473206F662074686520656469746F7220686173206368616E6765642E
		Sub ContentsDidChange()
		  Self.Changed = True
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonAST
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_AST)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonErrors
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_ERRORS)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonTokens
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_TOKENS)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ErrorsListbox
	#tag Event
		Function ConstructContextualMenu(base As DesktopMenuItem, x As Integer, y As Integer) As Boolean
		  #Pragma Unused x
		  #Pragma Unused y
		  
		  // We allow the user to copy the contents of the error message (column 0).
		  
		  If Me.SelectedRowValue = "" Then Return False
		  
		  base.AddMenu(New DesktopMenuItem("Copy"))
		  
		  Return True
		End Function
	#tag EndEvent
	#tag Event
		Function ContextualMenuItemSelected(selectedItem As DesktopMenuItem) As Boolean
		  Select Case selectedItem.Text
		  Case "Copy"
		    Var c As New Clipboard
		    c.Text = Me.SelectedRowValue
		    c.Close
		    Return True
		  End Select
		  
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events DisassemblyOutput
	#tag Event
		Sub Opening()
		  // Ensure we use a monospace font.
		  Me.FontName = DefaultMonospaceFont
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events Output
	#tag Event
		Sub Opening()
		  Me.FontName = DefaultMonospaceFont
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonRun
	#tag Event
		Sub Pressed()
		  Run
		  
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonDisassembler
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_DISASSEMBLER_OUTPUT)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonDebug
	#tag Event
		Sub Pressed()
		  /// Compiles and runs the code in the source editor in debug mode.
		  
		  Var f As ObjoScript.Func = Compile(True, CheckBoxShowCoreBytecode.Value)
		  
		  If f = Nil Then
		    // Compilation failed.
		    Return
		  End If
		  
		  // Setup the UI.
		  ButtonRun.Enabled = False
		  Me.Enabled = False
		  ButtonStep.Enabled = True
		  SwitchToPanel(PANEL_DEBUGGER)
		  
		  // Setup the VM in debug mode.
		  SetupVM(True)
		  
		  // Run the function.
		  Try
		    VM.Interpret(f)
		  Catch e As ObjoScript.VMException
		    DisplayVMError(e)
		  End Try
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonStep
	#tag Event
		Sub Pressed()
		  /// Steps the VM.
		  /// Assumes that the VM is running already.
		  
		  // Do nothing if the VM is currently executing code.
		  If VM.IsRunning Then Return
		  
		  SwitchToPanel(PANEL_DEBUGGER)
		  
		  VM.Run(True)
		  
		  // Update the debugger.
		  DebuggerTree.Display(VM, VM.GetCurrentFrame)
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonDebugger
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_DEBUGGER)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonStop
	#tag Event
		Sub Pressed()
		  /// Stops the VM.
		  
		  If VM = Nil Then Return
		  
		  VM.Stop
		  
		  DismantleVM
		  
		  ButtonDebug.Enabled = True
		  ButtonRun.Enabled = True
		  ButtonStep.Enabled = False
		End Sub
	#tag EndEvent
#tag EndEvents
#tag ViewBehavior
	#tag ViewProperty
		Name="Name"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Interfaces"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Super"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Width"
		Visible=true
		Group="Size"
		InitialValue="600"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Height"
		Visible=true
		Group="Size"
		InitialValue="400"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MinimumWidth"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MinimumHeight"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumWidth"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumHeight"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Type"
		Visible=true
		Group="Frame"
		InitialValue="0"
		Type="Types"
		EditorType="Enum"
		#tag EnumValues
			"0 - Document"
			"1 - Movable Modal"
			"2 - Modal Dialog"
			"3 - Floating Window"
			"4 - Plain Box"
			"5 - Shadowed Box"
			"6 - Rounded Window"
			"7 - Global Floating Window"
			"8 - Sheet Window"
			"9 - Modeless Dialog"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="Title"
		Visible=true
		Group="Frame"
		InitialValue="Untitled"
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasCloseButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMaximizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMinimizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasFullScreenButton"
		Visible=true
		Group="Frame"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Resizeable"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Composite"
		Visible=false
		Group="OS X (Carbon)"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MacProcID"
		Visible=false
		Group="OS X (Carbon)"
		InitialValue="0"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="FullScreen"
		Visible=true
		Group="Behavior"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="DefaultLocation"
		Visible=true
		Group="Behavior"
		InitialValue="2"
		Type="Locations"
		EditorType="Enum"
		#tag EnumValues
			"0 - Default"
			"1 - Parent Window"
			"2 - Main Screen"
			"3 - Parent Window Screen"
			"4 - Stagger"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="Visible"
		Visible=true
		Group="Behavior"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="ImplicitInstance"
		Visible=true
		Group="Windows Behavior"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasBackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="BackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="&cFFFFFF"
		Type="ColorGroup"
		EditorType="ColorGroup"
	#tag EndViewProperty
	#tag ViewProperty
		Name="Backdrop"
		Visible=true
		Group="Background"
		InitialValue=""
		Type="Picture"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBar"
		Visible=true
		Group="Menus"
		InitialValue=""
		Type="DesktopMenuBar"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBarVisible"
		Visible=true
		Group="Deprecated"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
#tag EndViewBehavior
