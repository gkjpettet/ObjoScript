#tag DesktopWindow
Begin DesktopWindow WinIDE
   Backdrop        =   0
   BackgroundColor =   &cFFFFFF
   Composite       =   False
   DefaultLocation =   2
   FullScreen      =   False
   HasBackgroundColor=   False
   HasCloseButton  =   True
   HasFullScreenButton=   False
   HasMaximizeButton=   True
   HasMinimizeButton=   True
   Height          =   836
   ImplicitInstance=   False
   MacProcID       =   0
   MaximumHeight   =   32000
   MaximumWidth    =   32000
   MenuBar         =   910139391
   MenuBarVisible  =   False
   MinimumHeight   =   64
   MinimumWidth    =   64
   Resizeable      =   True
   Title           =   "ObjoScript IDE"
   Type            =   0
   Visible         =   True
   Width           =   1380
   Begin XUICodeEditor Editor
      AllowAutocomplete=   True
      AllowAutoCompleteInComments=   True
      AllowInertialScrolling=   True
      AutocloseBrackets=   False
      AutocompleteCombo=   1
      AutocompletePopupFontName=   "System"
      AutocompletePopupFontSize=   12
      AutoDeactivate  =   True
      BackgroundColor =   &c00000000
      BlinkCaret      =   True
      BorderColor     =   &c00000000
      CaretColour     =   &c00000000
      CaretColumn     =   0
      CaretLineNumber =   0
      CaretPosition   =   0
      CaretType       =   2
      CaretXCoordinate=   0
      Contents        =   ""
      ContentType     =   "XUICodeEditor.ContentTypes.SourceCode"
      CurrentLineHighlightColor=   &c00000000
      CurrentLineNumberColor=   &c00000000
      CurrentUndoID   =   0
      DisplayLineNumbers=   False
      DrawBlockLines  =   True
      Enabled         =   True
      FirstVisibleLine=   0
      FontName        =   "System"
      FontSize        =   12
      HasBottomBorder =   False
      HasFocus        =   False
      HasLeftBorder   =   False
      HasRightBorder  =   False
      HasTopBorder    =   False
      Height          =   564
      HighlightCurrentLine=   True
      HighlightDelimitersAroundCaret=   False
      Index           =   -2147483648
      InitialParent   =   ""
      JustTokenised   =   False
      LastFullyVisibleLineNumber=   0
      LastParseMicroseconds=   0.0
      Left            =   0
      LineNumberColor =   &c00000000
      LineNumberFontSize=   12
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   True
      LongestLineChanged=   False
      MinimumAutocompletionLength=   2
      MinimumParseInterval=   500
      NeedsFullRedraw =   False
      ReadOnly        =   False
      Scope           =   0
      ScrollPosX      =   0
      SelectionColour =   &c00000000
      SpacesPerTab    =   4
      TabIndex        =   0
      TabPanelIndex   =   0
      TabStop         =   True
      TextSelected    =   False
      Tooltip         =   ""
      Top             =   0
      VerticalLinePadding=   0
      Visible         =   True
      Width           =   670
   End
   Begin DesktopBevelButton ButtonAST
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "AST"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1300
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   1
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   True
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopBevelButton ButtonDisassembler
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Disassembler"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1038
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   2
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   106
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopBevelButton ButtonErrors
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Errors"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1156
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   3
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopBevelButton ButtonTokens
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Tokens"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   1228
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   5
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   60
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
   Begin DesktopPagePanel Panel
      AllowAutoDeactivate=   True
      Enabled         =   True
      Height          =   510
      Index           =   -2147483648
      Left            =   682
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PanelCount      =   5
      Panels          =   ""
      Scope           =   2
      SelectedPanelIndex=   0
      TabIndex        =   6
      TabPanelIndex   =   0
      TabStop         =   False
      Tooltip         =   ""
      Top             =   54
      Transparent     =   False
      Value           =   1
      Visible         =   True
      Width           =   678
      Begin DesktopListBox TokensListbox
         AllowAutoDeactivate=   True
         AllowAutoHideScrollbars=   True
         AllowExpandableRows=   False
         AllowFocusRing  =   False
         AllowResizableColumns=   False
         AllowRowDragging=   False
         AllowRowReordering=   False
         Bold            =   False
         ColumnCount     =   5
         ColumnWidths    =   "200, 60, 60, *, 60"
         DefaultRowHeight=   20
         DropIndicatorVisible=   False
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         GridLineStyle   =   0
         HasBorder       =   True
         HasHeader       =   True
         HasHorizontalScrollbar=   False
         HasVerticalScrollbar=   True
         HeadingIndex    =   -1
         Height          =   510
         Index           =   -2147483648
         InitialParent   =   "Panel"
         InitialValue    =   "Type	Line	Abs Pos	Value	Script ID"
         Italic          =   False
         Left            =   682
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         RequiresSelection=   False
         RowSelectionType=   0
         Scope           =   0
         TabIndex        =   0
         TabPanelIndex   =   1
         TabStop         =   True
         Tooltip         =   ""
         Top             =   54
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   678
         _ScrollOffset   =   0
         _ScrollWidth    =   -1
      End
      Begin DesktopListBox ErrorsListbox
         AllowAutoDeactivate=   True
         AllowAutoHideScrollbars=   True
         AllowExpandableRows=   False
         AllowFocusRing  =   False
         AllowResizableColumns=   False
         AllowRowDragging=   False
         AllowRowReordering=   False
         Bold            =   False
         ColumnCount     =   4
         ColumnWidths    =   "*, 60, 60, 60"
         DefaultRowHeight=   -1
         DropIndicatorVisible=   False
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         GridLineStyle   =   0
         HasBorder       =   True
         HasHeader       =   True
         HasHorizontalScrollbar=   False
         HasVerticalScrollbar=   True
         HeadingIndex    =   -1
         Height          =   510
         Index           =   -2147483648
         InitialParent   =   "Panel"
         InitialValue    =   "Message	Line	AbsPos	Script ID"
         Italic          =   False
         Left            =   682
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         RequiresSelection=   False
         RowSelectionType=   0
         Scope           =   2
         TabIndex        =   0
         TabPanelIndex   =   3
         TabStop         =   True
         Tooltip         =   ""
         Top             =   54
         Transparent     =   False
         Underline       =   False
         Visible         =   True
         Width           =   678
         _ScrollOffset   =   0
         _ScrollWidth    =   -1
      End
      Begin ASTTreeView ASTView
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   490
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   682
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   2
         TabStop         =   True
         Tooltip         =   ""
         Top             =   54
         UseFocusRing    =   False
         Visible         =   True
         Width           =   678
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
      Begin DebuggerTreeView DebuggerTree
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   490
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   682
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   5
         TabStop         =   True
         Tooltip         =   ""
         Top             =   54
         UseFocusRing    =   True
         Visible         =   True
         Width           =   678
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
      Begin DisassemblyTreeView DisassemblyOutput
         AutoDeactivate  =   True
         BackColor       =   &cFFFFFF00
         ColumnCount     =   1
         DarkBackColor   =   &c2D2D2D00
         DarkNodeTextColor=   &cFFFFFF00
         DarkSelectionTextColor=   &cFFFFFF00
         DragReceiveBehavior=   1
         Enabled         =   True
         FontName        =   "System"
         FontSize        =   0.0
         FontUnit        =   0
         HasBackColor    =   False
         HasBorder       =   True
         HasHeader       =   False
         HasInactiveSelectionColor=   False
         HasNodeColor    =   False
         HasNodeTextColor=   False
         HasSelectionColor=   False
         HasSelectionTextColor=   False
         Height          =   510
         InactiveSelectionColor=   &cD3D3D300
         Index           =   -2147483648
         InitialParent   =   "Panel"
         Left            =   682
         LinuxDrawTreeLines=   False
         LinuxExpanderStyle=   0
         LinuxHighlightFullRow=   True
         LockBottom      =   True
         LockedInPosition=   False
         LockLeft        =   True
         LockRight       =   True
         LockTop         =   True
         MacDrawTreeLines=   False
         MacExpanderStyle=   0
         MacHighlightFullRow=   True
         MultiSelection  =   False
         NodeEvenColor   =   &cFFFFFF00
         NodeHeight      =   18
         NodeOddColor    =   &cFFFFFF00
         NodeTextColor   =   &c00000000
         QuartzShading   =   False
         Scope           =   2
         SelectionColor  =   &c478A1A00
         SelectionSeparator=   0
         SelectionTextColor=   &cFFFFFF00
         SystemNodeColors=   True
         TabIndex        =   0
         TabPanelIndex   =   4
         TabStop         =   True
         Tooltip         =   ""
         Top             =   54
         UseFocusRing    =   True
         Visible         =   True
         Width           =   678
         WinDrawTreeLines=   True
         WinHighlightFullRow=   False
      End
   End
   Begin DesktopTextArea Output
      AllowAutoDeactivate=   True
      AllowFocusRing  =   False
      AllowSpellChecking=   True
      AllowStyledText =   True
      AllowTabs       =   False
      BackgroundColor =   &cFFFFFF
      Bold            =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Format          =   ""
      HasBorder       =   True
      HasHorizontalScrollbar=   False
      HasVerticalScrollbar=   True
      Height          =   249
      HideSelection   =   True
      Index           =   -2147483648
      Italic          =   False
      Left            =   20
      LineHeight      =   0.0
      LineSpacing     =   1.0
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   True
      LockRight       =   True
      LockTop         =   False
      MaximumCharactersAllowed=   0
      Multiline       =   True
      ReadOnly        =   True
      Scope           =   2
      TabIndex        =   7
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ""
      TextAlignment   =   0
      TextColor       =   &c000000
      Tooltip         =   ""
      Top             =   576
      Transparent     =   False
      Underline       =   False
      UnicodeMode     =   1
      ValidationMask  =   ""
      Visible         =   True
      Width           =   650
   End
   Begin XUIImageButton ButtonStepOver
      AllowAutoDeactivate=   True
      AllowFocus      =   False
      AllowFocusRing  =   True
      AllowTabs       =   False
      Backdrop        =   0
      BorderColor     =   &c00000000
      DefaultImage    =   539498495
      DisabledImage   =   1357662207
      Enabled         =   True
      HasBottomBorder =   False
      HasLeftBorder   =   False
      HasRightBorder  =   False
      HasTopBorder    =   False
      Height          =   22
      HoverImage      =   539498495
      Index           =   -2147483648
      IsPressed       =   False
      Left            =   741
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PressedImage    =   1357662207
      Scope           =   2
      TabIndex        =   8
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   True
      Type            =   ""
      Visible         =   True
      Width           =   22
   End
   Begin XUIImageButton ButtonStepIn
      AllowAutoDeactivate=   True
      AllowFocus      =   False
      AllowFocusRing  =   True
      AllowTabs       =   False
      Backdrop        =   0
      BorderColor     =   &c00000000
      DefaultImage    =   990324735
      DisabledImage   =   2011461631
      Enabled         =   True
      HasBottomBorder =   False
      HasLeftBorder   =   False
      HasRightBorder  =   False
      HasTopBorder    =   False
      Height          =   22
      HoverImage      =   990324735
      Index           =   -2147483648
      IsPressed       =   False
      Left            =   770
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PressedImage    =   2011461631
      Scope           =   2
      TabIndex        =   9
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   True
      Type            =   ""
      Visible         =   True
      Width           =   22
   End
   Begin XUIImageButton ButtonRunPause
      AllowAutoDeactivate=   True
      AllowFocus      =   False
      AllowFocusRing  =   True
      AllowTabs       =   False
      Backdrop        =   0
      BorderColor     =   &c00000000
      DefaultImage    =   601647103
      DisabledImage   =   601647103
      Enabled         =   True
      HasBottomBorder =   False
      HasLeftBorder   =   False
      HasRightBorder  =   False
      HasTopBorder    =   False
      Height          =   22
      HoverImage      =   601647103
      Index           =   -2147483648
      IsPressed       =   False
      Left            =   682
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PressedImage    =   507774975
      Scope           =   2
      TabIndex        =   10
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   True
      Type            =   ""
      Visible         =   True
      Width           =   22
   End
   Begin XUIImageButton ButtonStop
      AllowAutoDeactivate=   True
      AllowFocus      =   False
      AllowFocusRing  =   True
      AllowTabs       =   False
      Backdrop        =   0
      BorderColor     =   &c00000000
      DefaultImage    =   285988863
      DisabledImage   =   285988863
      Enabled         =   False
      HasBottomBorder =   False
      HasLeftBorder   =   False
      HasRightBorder  =   False
      HasTopBorder    =   False
      Height          =   22
      HoverImage      =   285988863
      Index           =   -2147483648
      IsPressed       =   False
      Left            =   712
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      PressedImage    =   1880049663
      Scope           =   2
      TabIndex        =   11
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   True
      Type            =   ""
      Visible         =   True
      Width           =   22
   End
   Begin DesktopTextArea DebuggerOutput
      AllowAutoDeactivate=   True
      AllowFocusRing  =   False
      AllowSpellChecking=   True
      AllowStyledText =   True
      AllowTabs       =   False
      BackgroundColor =   &cFFFFFF
      Bold            =   False
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Format          =   ""
      HasBorder       =   True
      HasHorizontalScrollbar=   False
      HasVerticalScrollbar=   True
      Height          =   249
      HideSelection   =   True
      Index           =   -2147483648
      Italic          =   False
      Left            =   682
      LineHeight      =   0.0
      LineSpacing     =   1.0
      LockBottom      =   True
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   False
      MaximumCharactersAllowed=   0
      Multiline       =   True
      ReadOnly        =   True
      Scope           =   2
      TabIndex        =   12
      TabPanelIndex   =   0
      TabStop         =   True
      Text            =   ""
      TextAlignment   =   0
      TextColor       =   &c000000
      Tooltip         =   ""
      Top             =   576
      Transparent     =   False
      Underline       =   False
      UnicodeMode     =   1
      ValidationMask  =   ""
      Visible         =   True
      Width           =   674
   End
   Begin DesktopCheckBox CheckBoxDebugMode
      AllowAutoDeactivate=   True
      Bold            =   False
      Caption         =   "Debug Mode"
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      Height          =   20
      Index           =   -2147483648
      Italic          =   False
      Left            =   804
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      Scope           =   0
      TabIndex        =   13
      TabPanelIndex   =   0
      TabStop         =   True
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      VisualState     =   1
      Width           =   108
   End
   Begin DesktopBevelButton ButtonDebugger
      Active          =   False
      AllowAutoDeactivate=   True
      AllowFocus      =   True
      BackgroundColor =   &c00000000
      BevelStyle      =   0
      Bold            =   False
      ButtonStyle     =   1
      Caption         =   "Debugger"
      CaptionAlignment=   3
      CaptionDelta    =   0
      CaptionPosition =   1
      Enabled         =   True
      FontName        =   "System"
      FontSize        =   0.0
      FontUnit        =   0
      HasBackgroundColor=   False
      Height          =   22
      Icon            =   0
      IconAlignment   =   0
      IconDeltaX      =   0
      IconDeltaY      =   0
      Index           =   -2147483648
      InitialParent   =   ""
      Italic          =   False
      Left            =   924
      LockBottom      =   False
      LockedInPosition=   False
      LockLeft        =   False
      LockRight       =   True
      LockTop         =   True
      MenuStyle       =   0
      PanelIndex      =   0
      Scope           =   2
      TabIndex        =   14
      TabPanelIndex   =   0
      TabStop         =   True
      TextColor       =   &c00000000
      Tooltip         =   ""
      Top             =   20
      Transparent     =   False
      Underline       =   False
      Value           =   False
      Visible         =   True
      Width           =   106
      _mIndex         =   0
      _mInitialParent =   ""
      _mName          =   ""
      _mPanelIndex    =   0
   End
End
#tag EndDesktopWindow

#tag WindowCode
	#tag Event
		Function CancelClosing(appQuitting As Boolean) As Boolean
		  #Pragma Unused appQuitting
		  
		  If Self.Changed Then
		    // Prompt the user to save changes.
		    Select Case SaveChangesDialog
		    Case SavePromptChoices.DontSave
		      // Allow the window to close.
		      Return False
		    Case SavePromptChoices.Cancel
		      // Prevent the window closing.
		      Return True
		    Case SavePromptChoices.Save
		      Return Not SaveFile(File)
		    End Select
		  Else
		    // Allow the window to close.
		    Return False
		  End If
		  
		End Function
	#tag EndEvent

	#tag Event
		Sub MenuBarSelected()
		  // Edit menu
		  EditCopy.Enabled = Editor.TextSelected
		  EditCut.Enabled = Editor.TextSelected
		  EditRedo.Enabled = UndoManager.CanRedo
		  EditSelectAll.Enabled = Editor.Contents.Length > 0
		  EditUndo.Enabled = UndoManager.CanUndo
		  
		End Sub
	#tag EndEvent

	#tag Event
		Sub Opening()
		  // Create an undo manager.
		  UndoManager = New XUIUndoManager
		  
		  // We have to assign the code editor's undo manager here because the window's Opening event fires 
		  // after the editor's Opening event.
		  Editor.UndoManager = Self.UndoManager
		  
		  Editor.Formatter = New XUICEObjoScriptFormatter
		  
		  Editor.Theme = XUICETheme.FromFile(SpecialFolder.Resource("EditorTheme.toml"))
		  
		  // Increase the default font a little.
		  Editor.FontSize = 14
		  
		  // Enable autocompletion.
		  Editor.AllowAutocomplete = True
		  
		  // Initialise a basic autocompletion engine.
		  InitialiseAutocomplete
		  
		  If File <> Nil And File.Exists Then
		    Var tin As TextInputStream = TextInputStream.Open(File)
		    Var s As String = tin.ReadAll
		    tin.Close
		    s = s.ReplaceLineEndings(EndOfLine.UNIX)
		    Editor.Insert(s, 0, False, True, False)
		  End If
		  
		  Self.Changed = False
		End Sub
	#tag EndEvent


	#tag MenuHandler
		Function EditCopy() As Boolean Handles EditCopy.Action
		  // Copies the contents of the current selection in the editor to the clipboard.
		  
		  Var c As New Clipboard
		  If Editor.TextSelected Then
		    c.Text = Editor.CurrentSelection.ToString
		  Else
		    c.Text = ""
		  End If
		  c.Close
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditCut() As Boolean Handles EditCut.Action
		  // Cuts the contents of the current selection in the editor and puts it on the clipboard.
		  
		  Var c As New Clipboard
		  If Editor.TextSelected Then
		    c.Text = Editor.CurrentSelection.ToString
		  Else
		    c.Text = ""
		  End If
		  c.Close
		  
		  Editor.DeleteSelection(True, True, True, "Cut Text")
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditPaste() As Boolean Handles EditPaste.Action
		  // Pastes the contents of the clipboard into the editor.
		  
		  // Get the clipboard text (replacing any line endings with UNIX ones).
		  Var c As New Clipboard
		  Var t As String = c.Text.ReplaceLineEndings(&u0A)
		  c.Close
		  
		  // Insert the text.
		  If t.CharacterCount > 0 Then
		    If Editor.TextSelected Then
		      Editor.ReplaceCurrentSelection(t)
		    Else
		      Editor.Insert(t, Editor.CaretPosition, True)
		    End If
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditRedo() As Boolean Handles EditRedo.Action
		  If UndoManager.CanRedo Then
		    UndoManager.Redo
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditSelectAll() As Boolean Handles EditSelectAll.Action
		  // Select everything in the editor.
		  
		  Self.Editor.SelectAll
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function EditUndo() As Boolean Handles EditUndo.Action
		  If UndoManager.CanUndo Then
		    UndoManager.Undo
		  End If
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileCloseWindow() As Boolean Handles FileCloseWindow.Action
		  Self.Close
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileNew() As Boolean Handles FileNew.Action
		  // Create a new IDE window instance.
		  
		  Var w As New WinIDE(Nil)
		  w.Show
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileOpen() As Boolean Handles FileOpen.Action
		  /// Open an ObjoScript file.
		  
		  Var f As FolderItem = FolderItem.ShowOpenFileDialog(DocumentTypes.ObjoScript)
		  
		  If f = Nil Then Return True
		  
		  Var w As New WinIDE(f)
		  w.Show
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileSave() As Boolean Handles FileSave.Action
		  Call SaveFile(Self.File)
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler

	#tag MenuHandler
		Function FileSaveAs() As Boolean Handles FileSaveAs.Action
		  Call SaveFile(Nil)
		  
		  Return True
		  
		End Function
	#tag EndMenuHandler


	#tag Method, Flags = &h21, Description = 436F6D70696C65732074686520636F6E74656E7473206F662074686520656469746F722028616E6420746865207374616E64617264206C6962726172792920616E64207468656E2072756E732074686520564D20776974682074686520636F6D70696C65642066756E6374696F6E2E
		Private Sub BeginVM(stepMode As ObjoScript.VM.StepModes)
		  /// Compiles the contents of the editor (and the standard library) and then runs the VM with the compiled function.
		  
		  Reset
		  
		  Var func As ObjoScript.Func = Compile
		  If func = Nil Then Return
		  
		  SwitchToPanel(PANEL_DEBUGGER)
		  
		  // Run the VM in debugging mode if specified.
		  Vm.DebugMode = CheckBoxDebugMode.Value
		  
		  Try
		    VM.Interpret(func, stepMode)
		  Catch e As ObjoScript.VMException
		    DisplayVMError(e)
		  End Try
		  
		  ButtonStepOver.Enabled = True
		  ButtonStepIn.Enabled = True
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 436F6D70696C65732074686520736F7572636520636F646520696E2074686520656469746F722C20616C6F6E67207769746820746865207374616E64617264206C6962726172792C20696E746F20612066756E6374696F6E2077686963682069732072657475726E65642E2052657475726E73204E696C20696620636F6D70696C6174696F6E206661696C732E
		Private Function Compile() As ObjoScript.Func
		  /// Compiles the source code in the editor, along with the standard library, into a function which is returned.
		  /// Returns Nil if compilation fails.
		  
		  #Pragma BreakOnExceptions False
		  
		  Reset
		  
		  // Show the debugger by default.
		  SwitchToPanel(PANEL_DEBUGGER)
		  
		  Var func As ObjoScript.Func
		  Try
		    func = Compiler.Compile(Editor.Contents)
		    
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    // Show the AST.
		    ASTView.Display(Compiler.AST, False)
		    
		    // Disassemble the function. Show the standard library bytecode.
		    DisassemblyOutput.Display(func, True)
		    
		    // Successful compilation.
		    Return func
		    
		  Catch le As ObjoScript.LexerException
		    // Show the lexer error.
		    DisplayLexerError(le)
		    
		    Return Nil
		    
		  Catch pe As ObjoScript.ParserException
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    DisplayParserErrors(Compiler.ParserErrors)
		    
		    Return Nil
		    
		  Catch ce As ObjoScript.CompilerException
		    // Show the tokens.
		    UpdateTokensListbox(Compiler.Tokens, False)
		    
		    // Show the AST.
		    ASTView.Display(Compiler.AST, False)
		    
		    DisplayCompilerError(ce)
		    
		    Return Nil
		  End Try
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Constructor(file As FolderItem)
		  Self.File = file
		  
		  // Calling the overridden superclass constructor.
		  Super.Constructor
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 52657475726E7320612073656E7369626C652064656661756C74206D6F6E6F737061636520666F6E74206E616D6520666F722074686520706C6174666F726D207765277265206F6E2E
		Private Function DefaultMonospaceFont() As String
		  /// Returns a sensible default monospace font name for the platform we're on.
		  
		  #If TargetMacOS Then
		    Return "Menlo"
		    
		  #ElseIf TargetWindows Then
		    Return "Consolas"
		    
		  #ElseIf TargetLinux Then
		    Return "DejaVu Sans Mono"
		  #EndIf
		End Function
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F7574206120636F6D70696C6572206572726F7220696E20746865204F75747075742054657874417265612E
		Private Sub DisplayCompilerError(e As ObjoScript.CompilerException)
		  /// Displays details about a compiler error in the Output TextArea.
		  
		  Var s() As String
		  s.Add("======================")
		  s.Add("COMPILER ERROR")
		  s.Add("======================")
		  s.Add("line " + e.Location.LineNumber.ToString + ": " + e.Message)
		  
		  Output.Text = String.FromArray(s, EndOfLine)
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F75742061206C6578657220657863657074696F6E20696E20746865204F75747075742054657874417265612E
		Private Sub DisplayLexerError(e As ObjoScript.LexerException)
		  /// Displays details about a lexer exception in the Output TextArea.
		  
		  Output.Text = e.LineNumber.ToString + ", " + e.LineCharacterPosition.ToString + ": " + e.Message
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C61797320616E79206572726F72732074686174206F6363757272656420647572696E672070617273696E6720696E20746865204F75747075742054657874417265612E
		Private Sub DisplayParserErrors(errors() As ObjoScript.ParserException)
		  /// Displays any errors that occurred during parsing in the Output TextArea.
		  
		  If errors.Count = 1 Then
		    Output.Text = "A parsing error occurred."
		  Else
		    Output.Text = errors.Count.ToString + " parsing errors occurred."
		  End If
		  
		  UpdateParsingErrorsListbox(errors)
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 446973706C6179732064657461696C732061626F7574206120564D2072756E74696D65206572726F7220696E20746865204F75747075742054657874417265612E
		Private Sub DisplayVMError(e As ObjoScript.VMException)
		  /// Displays details about a VM runtime error in the Output TextArea.
		  
		  Var s() As String
		  s.Add("======================")
		  s.Add("RUNTIME ERROR")
		  s.Add("======================")
		  s.Add("[line " + e.LineNumber.ToString + "]: " + e.Message) + EndOfLine
		  s.Add("STACK DUMP") + EndOfLine
		  s.Add(e.StackDump) + EndOfLine
		  s.Add("STACK TRACE") + EndOfLine + EndOfLine
		  Output.Text = Output.Text + If(Output.Text.Length > 0, Chr(13), "") + String.FromArray(s, EndOfLine) + String.FromArray(e.VMStackTrace, EndOfLine)
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 496E697469616C6973657320746865206175746F636F6D706C65746520656E67696E652E
		Private Sub InitialiseAutocomplete()
		  /// Initialises the autocomplete engine.
		  
		  AutocompleteEngine = New BasicAutocompleteEngine(True)
		  
		  AutocompleteEngine.AddOption("and")
		  AutocompleteEngine.AddOption("as")
		  AutocompleteEngine.AddOption("assert")
		  AutocompleteEngine.AddOption("breakpoint")
		  AutocompleteEngine.AddOption("class")
		  AutocompleteEngine.AddOption("continue")
		  AutocompleteEngine.AddOption("constructor")
		  AutocompleteEngine.AddOption("else")
		  AutocompleteEngine.AddOption("exit")
		  AutocompleteEngine.AddOption("export")
		  AutocompleteEngine.AddOption("false")
		  AutocompleteEngine.AddOption("foreach")
		  AutocompleteEngine.AddOption("foreign")
		  AutocompleteEngine.AddOption("function")
		  AutocompleteEngine.AddOption("if")
		  AutocompleteEngine.AddOption("import")
		  AutocompleteEngine.AddOption("in")
		  AutocompleteEngine.AddOption("is")
		  AutocompleteEngine.AddOption("not")
		  AutocompleteEngine.AddOption("nothing")
		  AutocompleteEngine.AddOption("or")
		  AutocompleteEngine.AddOption("print")
		  AutocompleteEngine.AddOption("return")
		  AutocompleteEngine.AddOption("static")
		  AutocompleteEngine.AddOption("super")
		  AutocompleteEngine.AddOption("then")
		  AutocompleteEngine.AddOption("this")
		  AutocompleteEngine.AddOption("true")
		  AutocompleteEngine.AddOption("var")
		  AutocompleteEngine.AddOption("while")
		  AutocompleteEngine.AddOption("xor")
		  
		  AutocompleteEngine.AddOption("Boolean")
		  AutocompleteEngine.AddOption("Number")
		  AutocompleteEngine.AddOption("Function")
		  AutocompleteEngine.AddOption("Range")
		  AutocompleteEngine.AddOption("String")
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Reset()
		  ASTView.RemoveAllNodes
		  DisassemblyOutput.RemoveAllNodes
		  ErrorsListbox.RemoveAllRows
		  TokensListbox.RemoveAllRows
		  Output.Text = ""
		  DebuggerOutput.Text = ""
		  
		  // Create a new compiler in debug mode.
		  Compiler = New ObjoScript.Compiler
		  Compiler.DebugMode = True
		  
		  // If the VM has been instantiated, remove any handlers we added.
		  If VM <> Nil Then
		    RemoveHandler VM.Print, AddressOf VMPrintDelegate
		    RemoveHandler VM.DebugPrint, AddressOf VMDebugPrintDelegate
		  End If
		  
		  // Create a new VM and add the required event handlers.
		  VM = New ObjoScript.VM
		  VM.DebugMode = CheckBoxDebugMode.Value
		  VM.TraceExecution = CheckBoxDebugMode.Value
		  AddHandler VM.Print, AddressOf VMPrintDelegate
		  AddHandler VM.DebugPrint, AddressOf VMDebugPrintDelegate
		  
		  ButtonStepOver.Enabled = False
		  ButtonStepIn.Enabled = False
		  
		  FirstRun = True
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 54686572652061726520756E7361766564206368616E6765732E2050726573656E7420746865207573657220776974682061206469616C6F672061736B696E67207468656D207768617420746F20646F2E
		Function SaveChangesDialog() As SavePromptChoices
		  /// There are unsaved changes. Present the user with a dialog asking them what to do.
		  
		  Var d As New MessageDialog
		  Var b As MessageDialogButton
		  d.Icon = MessageDialog.GraphicCaution
		  d.ActionButton.Caption = "Save"
		  d.CancelButton.Visible = True
		  d.AlternateActionButton.Visible = True // Don't save button.
		  d.AlternateActionButton.Caption = "Don't Save"
		  d.Message = "Do you want to save changes to this document before closing?"
		  d.Explanation = "If you don't save, your changes will be lost. "
		  
		  b = d.ShowModal
		  Select Case b
		  Case d.ActionButton
		    Return SavePromptChoices.Save
		  Case d.AlternateActionButton
		    Return SavePromptChoices.DontSave
		  Case d.CancelButton
		    Return SavePromptChoices.Cancel
		  End Select
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0, Description = 53617665732074686520636F6E74656E7473206F662074686520656469746F7220746F206066602E2049662060666020697320604E696C60207468656E2077652070726F6D707420746865207573657220666F7220612073617665206C6F636174696F6E2E2052657475726E7320547275652069662074686520636F6E74656E74732077657265207361766564206F722046616C7365206966206E6F742E
		Function SaveFile(f As FolderItem) As Boolean
		  /// Saves the contents of the editor to `f`. If `f` is `Nil` then we prompt the user
		  /// for a save location.
		  /// Returns True if the contents were saved or False if not.
		  
		  Self.Changed = True
		  
		  If f = Nil Or Not f.Exists Then
		    f = FolderItem.ShowSaveFileDialog(DocumentTypes.ObjoScript, "New ObjoScript file.objo_script")
		  End If
		  
		  If f = Nil Then Return False
		  
		  Var tout As TextOutputStream = TextOutputStream.Create(f)
		  tout.Write(Editor.Contents)
		  tout.Close
		  
		  Self.File = f
		  
		  Self.Changed = False
		  
		  Return True
		  
		End Function
	#tag EndMethod

	#tag Method, Flags = &h21
		Private Sub SwitchToPanel(id As Integer)
		  Select Case id
		  Case PANEL_AST
		    ButtonAST.Value = True
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDisassembler.Value = False
		    ButtonDebugger.Value = False
		    Panel.SelectedPanelIndex = id
		    
		  Case PANEL_TOKENS
		    ButtonAST.Value = False
		    ButtonTokens.Value = True
		    ButtonErrors.Value = False
		    ButtonDisassembler.Value = False
		    ButtonDebugger.Value = False
		    Panel.SelectedPanelIndex = id
		    
		  Case PANEL_ERRORS
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = True
		    ButtonDisassembler.Value = False
		    ButtonDebugger.Value = False
		    Panel.SelectedPanelIndex = PANEL_ERRORS
		    
		  Case PANEL_DISASSEMBLER_OUTPUT
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDisassembler.Value = True
		    
		    Panel.SelectedPanelIndex = PANEL_DISASSEMBLER_OUTPUT
		    
		  Case PANEL_DEBUGGER
		    ButtonAST.Value = False
		    ButtonTokens.Value = False
		    ButtonErrors.Value = False
		    ButtonDisassembler.Value = False
		    ButtonDebugger.Value = True
		    Panel.SelectedPanelIndex = PANEL_DEBUGGER
		    
		  Else
		    Raise New UnsupportedOperationException("Unknown panel ID.")
		  End Select
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 55706461746573207468652070617273696E67206572726F7273206C697374626F7820776974682074686520636F6E74656E7473206F6620606572726F7273602E
		Private Sub UpdateParsingErrorsListbox(errors() As ObjoScript.ParserException)
		  /// Updates the parsing errors listbox with the contents of `errors`.
		  
		  ErrorsListbox.RemoveAllRows
		  
		  If errors.Count = 0 Then Return
		  
		  For Each e As ObjoScript.ParserException In errors
		    ErrorsListbox.AddRow(e.Message, e.Location.LineNumber.ToString, e.Location.StartPosition.ToString, e.Location.ScriptID.ToString)
		  Next e
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h21, Description = 557064617465732074686520746F6B656E73206C697374626F7820776974682074686520706173736564206172726179206F662060746F6B656E73602E
		Private Sub UpdateTokensListbox(tokens() As ObjoScript.Token, showStandardLibrary As Boolean)
		  /// Updates the tokens listbox with the passed array of `tokens`.
		  ///
		  /// If `showStandardLibrary` is False then we don't list those tokens that were
		  /// created by the compiler from the standard library. Their scriptID is `-1`.
		  /// type, line, abs pos, value, script ID.
		  
		  TokensListbox.RemoveAllRows
		  
		  Var type, value As String
		  For Each t As ObjoScript.Token In tokens
		    
		    If t.ScriptID = -1 And Not showStandardLibrary Then Continue
		    
		    // Compute the value and type.
		    Select Case t.Type
		    Case ObjoScript.TokenTypes.Number
		      If t.IsInteger Then
		        value = t.NumberValue.ToString(Locale.Current, "#")
		        type = "Number (int)"
		      Else
		        value = t.NumberValue.ToString
		        type = "Number (double)"
		      End If
		      
		    Case ObjoScript.TokenTypes.Boolean_
		      value = t.BooleanValue.ToString
		      type = t.Type.ToString
		      
		    Else
		      value = t.Lexeme
		      type = t.Type.ToString
		    End Select
		    
		    TokensListbox.AddRow(type, t.LineNumber.ToString, t.StartPosition.ToString, value, t.ScriptID.ToString)
		    
		  Next t
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub VMDebugPrintDelegate(sender As ObjoScript.VM, s As String)
		  #Pragma Unused sender
		  
		  DebuggerOutput.Text = DebuggerOutput.Text + s + EndOfLine
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub VMPrintDelegate(sender As ObjoScript.VM, s As String)
		  #Pragma Unused sender
		  
		  Output.Text = Output.Text + s + EndOfLine
		End Sub
	#tag EndMethod


	#tag Property, Flags = &h0, Description = 412076657279206261736963204F626A6F536372697074206175746F636F6D706C65746520656E67696E652E
		AutocompleteEngine As BasicAutocompleteEngine
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520636F6D70696C6572207573656420746F20636F6D70696C6520736F7572636520636F64652E
		Compiler As ObjoScript.Compiler
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 5468652066696C65206265696E67206564697465642E2057696C6C206265204E696C2069662061206E65772066696C65207468617420686173206E65766572206265656E2073617665642E
		File As FolderItem
	#tag EndProperty

	#tag Property, Flags = &h21, Description = 547275652069662074686520564D20686173206E6F74207965742072756E20666F6C6C6F77696E6720636F6D70696C6174696F6E206F662074686520736F7572636520636F646520696E2074686520656469746F722E
		Private FirstRun As Boolean = True
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520756E646F206D616E6167657220666F7220746869732077696E646F772E
		UndoManager As XUIUndoManager
	#tag EndProperty

	#tag Property, Flags = &h0, Description = 54686520564D207573656420746F206578656375746520636F64652E
		VM As ObjoScript.VM
	#tag EndProperty


	#tag Constant, Name = PANEL_AST, Type = Double, Dynamic = False, Default = \"1", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_DEBUGGER, Type = Double, Dynamic = False, Default = \"4", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_DISASSEMBLER_OUTPUT, Type = Double, Dynamic = False, Default = \"3", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_ERRORS, Type = Double, Dynamic = False, Default = \"2", Scope = Private
	#tag EndConstant

	#tag Constant, Name = PANEL_TOKENS, Type = Double, Dynamic = False, Default = \"0", Scope = Private
	#tag EndConstant


	#tag Enum, Name = SavePromptChoices, Type = Integer, Flags = &h0
		Cancel
		  DontSave
		Save
	#tag EndEnum


#tag EndWindowCode

#tag Events Editor
	#tag Event , Description = 54686520656469746F722069732061626F757420746F20626520646973706C617965642E
		Sub Opening()
		  Me.ContentType = XUICodeEditor.ContentTypes.SourceCode
		  Me.BorderColor = New ColorGroup(&cD7D9D9, &c2A2A2A)
		End Sub
	#tag EndEvent
	#tag Event , Description = 54686520636F646520656469746F722069732061736B696E6720666F72206175746F636F6D706C6574696F6E206F7074696F6E7320666F72207468652073706563696669656420607072656669786020617420606361726574436F6C756D6E60206F6E206C696E65206E756D626572206063617265744C696E65602E20596F752073686F756C642072657475726E204E696C20696620746865726520617265206E6F6E652E
		Function AutocompleteDataForPrefix(prefix As String, caretLine As Integer, caretColumn As Integer) As XUICEAutocompleteData
		  #Pragma Unused caretLine
		  #Pragma Unused caretColumn
		  
		  Return AutocompleteEngine.DataForPrefix(prefix)
		  
		End Function
	#tag EndEvent
	#tag Event , Description = 546865207465787420636F6E74656E7473206F662074686520656469746F7220686173206368616E6765642E
		Sub ContentsDidChange()
		  Self.Changed = True
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonAST
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_AST)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonDisassembler
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_DISASSEMBLER_OUTPUT)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonErrors
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_ERRORS)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonTokens
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_TOKENS)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ErrorsListbox
	#tag Event
		Function ConstructContextualMenu(base As DesktopMenuItem, x As Integer, y As Integer) As Boolean
		  #Pragma Unused x
		  #Pragma Unused y
		  
		  // We allow the user to copy the contents of the error message (column 0).
		  
		  If Me.SelectedRowValue = "" Then Return False
		  
		  base.AddMenu(New DesktopMenuItem("Copy"))
		  
		  Return True
		End Function
	#tag EndEvent
	#tag Event
		Function ContextualMenuItemSelected(selectedItem As DesktopMenuItem) As Boolean
		  Select Case selectedItem.Text
		  Case "Copy"
		    Var c As New Clipboard
		    c.Text = Me.SelectedRowValue
		    c.Close
		    Return True
		  End Select
		  
		End Function
	#tag EndEvent
#tag EndEvents
#tag Events DisassemblyOutput
	#tag Event
		Sub Opening()
		  // Ensure we use a monospace font.
		  Me.FontName = DefaultMonospaceFont
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events Output
	#tag Event
		Sub Opening()
		  Me.FontName = DefaultMonospaceFont
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonStepIn
	#tag Event , Description = 54686520627574746F6E20686173206265656E20707265737365642E
		Sub Pressed()
		  ButtonStop.Enabled = True
		  
		  If FirstRun Then
		    BeginVM(ObjoScript.VM.StepModes.StepInto)
		    FirstRun = False
		  Else
		    VM.Run(ObjoScript.VM.StepModes.StepInto)
		  End If
		  
		  // Update the debugger.
		  DebuggerTree.Display(VM, VM.GetCurrentFrame)
		  
		  // Highlight the currently stopped on line.
		  If VM.LastStoppedLine > 0 And VM.LastStoppedLine <= Editor.LineManager.LineCount Then
		    Editor.CaretLineNumber = VM.LastStoppedLine
		  End If
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonRunPause
	#tag Event , Description = 54686520627574746F6E20686173206265656E20707265737365642E
		Sub Pressed()
		  ButtonStop.Enabled = True
		  
		  BeginVM(ObjoScript.VM.StepModes.None)
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonStop
	#tag Event , Description = 54686520627574746F6E20686173206265656E20707265737365642E
		Sub Pressed()
		  // Stops and resets the VM.
		  
		  If VM <> Nil Then
		    VM.Stop
		    VM.Reset
		  End If
		  
		  Me.Enabled = False
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events DebuggerOutput
	#tag Event
		Sub Opening()
		  Me.FontName = DefaultMonospaceFont
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events CheckBoxDebugMode
	#tag Event
		Sub ValueChanged()
		  If VM <> Nil Then
		    VM.DebugMode = Me.Value
		    VM.TraceExecution = Me.Value
		  End If
		  
		  ButtonStepIn.Enabled = Me.Value
		  ButtonStepOver.Enabled = Me.Value
		  
		End Sub
	#tag EndEvent
#tag EndEvents
#tag Events ButtonDebugger
	#tag Event
		Sub Pressed()
		  SwitchToPanel(PANEL_DEBUGGER)
		End Sub
	#tag EndEvent
#tag EndEvents
#tag ViewBehavior
	#tag ViewProperty
		Name="Name"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Interfaces"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Super"
		Visible=true
		Group="ID"
		InitialValue=""
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Width"
		Visible=true
		Group="Size"
		InitialValue="600"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Height"
		Visible=true
		Group="Size"
		InitialValue="400"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MinimumWidth"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MinimumHeight"
		Visible=true
		Group="Size"
		InitialValue="64"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumWidth"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MaximumHeight"
		Visible=true
		Group="Size"
		InitialValue="32000"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Type"
		Visible=true
		Group="Frame"
		InitialValue="0"
		Type="Types"
		EditorType="Enum"
		#tag EnumValues
			"0 - Document"
			"1 - Movable Modal"
			"2 - Modal Dialog"
			"3 - Floating Window"
			"4 - Plain Box"
			"5 - Shadowed Box"
			"6 - Rounded Window"
			"7 - Global Floating Window"
			"8 - Sheet Window"
			"9 - Metal Window"
			"11 - Modeless Dialog"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="Title"
		Visible=true
		Group="Frame"
		InitialValue="Untitled"
		Type="String"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasCloseButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMaximizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasMinimizeButton"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasFullScreenButton"
		Visible=true
		Group="Frame"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Resizeable"
		Visible=true
		Group="Frame"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="Composite"
		Visible=false
		Group="OS X (Carbon)"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MacProcID"
		Visible=false
		Group="OS X (Carbon)"
		InitialValue="0"
		Type="Integer"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="FullScreen"
		Visible=true
		Group="Behavior"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="DefaultLocation"
		Visible=true
		Group="Behavior"
		InitialValue="2"
		Type="Locations"
		EditorType="Enum"
		#tag EnumValues
			"0 - Default"
			"1 - Parent Window"
			"2 - Main Screen"
			"3 - Parent Window Screen"
			"4 - Stagger"
		#tag EndEnumValues
	#tag EndViewProperty
	#tag ViewProperty
		Name="Visible"
		Visible=true
		Group="Behavior"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="ImplicitInstance"
		Visible=true
		Group="Windows Behavior"
		InitialValue="True"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="HasBackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="BackgroundColor"
		Visible=true
		Group="Background"
		InitialValue="&cFFFFFF"
		Type="ColorGroup"
		EditorType="ColorGroup"
	#tag EndViewProperty
	#tag ViewProperty
		Name="Backdrop"
		Visible=true
		Group="Background"
		InitialValue=""
		Type="Picture"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBar"
		Visible=true
		Group="Menus"
		InitialValue=""
		Type="DesktopMenuBar"
		EditorType=""
	#tag EndViewProperty
	#tag ViewProperty
		Name="MenuBarVisible"
		Visible=true
		Group="Deprecated"
		InitialValue="False"
		Type="Boolean"
		EditorType=""
	#tag EndViewProperty
#tag EndViewBehavior
